@using Microsoft.AspNet.Identity
<!DOCTYPE html>
<html lang="pl_PL">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>

    <title>NoteeFY</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" />
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="~/styles/app.css" />
    <link rel="stylesheet" href="~/styles/colpick.css" type="text/css" />
</head>
<body>
<div id="main-page">

    <nav class="navbar navbar-default">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#">NoteeFY</a>
            </div>

            <div class="collapse navbar-collapse" id="myNavbar">
                <ul class="nav navbar-nav navbar-left">
                    <li><a>Witaj @User.Identity.GetUserName()!</a></li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li class="li-padding-custom"><button data-bind="click: user().addNote.bind(user(),0)" type="submit" class="btn btn-default "><i class="fa fa-plus-square"></i> Nowa notatka</button></li>
                    <li class="li-padding-custom"><button data-bind="click: user().addNote.bind(user(),1)" type="submit" class="btn btn-default "><i class="fa fa-bars"></i> Nowa ToDo Lista</button></li>
                    <li class="li-padding-custom"><button type="submit" class="btn btn-default" title="Wyloguj" onclick="javascript: document.getElementById('logoutForm').submit()"><i class="fa fa-sign-out"></i></button></li>
                </ul>
            </div>
        </div>
    </nav>


    <div class="notepad" data-bind="foreach: user().notes()">
        <div class="single-note" data-bind="style: {background: color()}">
            <div class="note-title">
                <span class="note-title-span" data-bind="html: !title() ? '<i>Tytuł</i>' : title, click: isEditTitle.bind($data, true), style: { display: !isEditTitle() ? 'inline-block' : 'none' }"></span>
                <input class="note-title-input form-control" maxlength="34" placeholder="Tytuł" data-bind="value: title, visible: isEditTitle, hasFocus: isEditTitle, event: { blur: updateNote.bind($data) }, style: {background: color()}"/>
            </div>
            <div class="note-content" data-bind="visible: type()===0">
                <span class="note-content-span" data-bind="html: !text() ? '<i>Wprowadź tekst</i>' : textAsHtml, click: isEditText.bind($data, true), style: { display: !isEditText() ? 'inline-block' : 'none' }"></span>
                <textarea class="note-content-textarea form-control custom-control" onkeyup="NoteeFy.refreshLayout()" data-bind="    value: text, visible: isEditText, hasFocus: isEditText, event: { blur: updateNote.bind($data) }, style: {background: color()}"></textarea>
            </div>
            <div class="todolist-content" data-bind="visible: type()===1">
                <div class="form-group">
                    <input type="text" class="form-control adding" maxlength="100" data-bind="value: currentTask, valueUpdate:'afterkeydown'" placeholder="Napisz coś!">
                    <button class="btn btn-default" data-bind="disable: !currentTask(), click: addTask" type="submit"><i class="fa fa-plus"></i></button>
                </div>
                <br/>
                <div class="tasks item" data-bind="foreach: tasks()">
                    <div class="single-task">
                        <table>
                            <tr>
                                <td><input type="checkbox" value="" data-bind="checked: isDone, click: $parent.goOnListBottom.bind($parent)"/></td>
                                <td><i style="visibility: hidden" class="fa fa-bars"></i></td>
                                <td><textarea class="tasks-textarea" rows="1" cols="42" maxlength="100" onkeyup="NoteeFy.refreshLayout()" data-bind="value: text, event: { blur: updateTask.bind($data) }, style: { textDecoration: isDone() ? 'line-through' : '' , background: $parent.color()}"></textarea></td>
                                <td><button class="btn btn-default" type="submit" data-bind="click: $parent.deleteTask.bind($parent)"><i class="fa fa-trash-o fa-lg"></i></button></td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
            <br/>
            <div class="menu">
                <button class="btn btn-default" type="submit" data-bind="click: $parent.user().deleteNote.bind($parent)"><i class="fa fa-times"></i></button>
                <button class="picker btn btn-default" type="button" data-bind="event: { mouseover: addColorPicker.bind($data) } "><i class="fa fa-paint-brush"> <span class="caret"></span></i></button>
                <span style="float: right;" data-bind="text: modificationDate;"></span>
            </div>
        </div>
    </div>
    <div style="clear: both;"></div>
</div>


<div id="loading" data-bind="visible: isLoading()">
    <div id="loading-window"></div>
    <div id="busy-indicator">
        <table align="center">
            <tr height="100%">
                <td height="100%" width="100%" valign="middle" align="center">
                    <img src="/images/busy_loader.gif" alt="Error" style="width: 150px; height: 150px;">
                </td>
            </tr>
            <tr>
                <td valign="middle" align="center">
                    <br/>
                    <font color="#FFFFFF "><h4>Ładuje dane...</h4></font>
                </td>
            </tr>
        </table>
    </div>
</div>

<script type="text/javascript" src="~/js/jquery/jquery-1.9.1.js"></script>
<script type="text/javascript" src="~/js/jquery/jquery-ui.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/masonry/3.3.1/masonry.pkgd.min.js"></script>
<script type="text/javascript" src="~/js/knockout/knockout-3.3.0.debug.js"></script>
<script type="text/javascript" src="~/js/knockout/knockout-sortable.min.js"></script>
<script type="text/javascript" src="~/js/external/colpick.js"></script>
<script type="text/javascript" src="~/js/external/moment-with-locales.min.js"></script>
<script type="text/javascript" src="~/js/models/user.js"></script>
<script type="text/javascript" src="~/js/models/note.js"></script>
<script type="text/javascript" src="~/js/models/task.js"></script>
<script type="text/javascript" src="~/js/app.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/autosize.js/1.18.4/jquery.autosize.min.js"></script>


</body>
</html>
