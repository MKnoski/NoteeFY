<!DOCTYPE html>
<html lang="pl_PL">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />

    <title>NoteeFY</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" />
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="styles/app.css" />
</head>
<body>
    <div id="main-page" data-bind="visible: logged()">
        <nav id="navigation-bar" class="navbar navbar-default" role="navigation">
            <div class="container-fluid">
                <div class="navbar-header">
                    <a class="navbar-brand" href="#">"NoteeFY"</a>
                </div>

                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1" style="float: right;">
                    <form class="navbar-form navbar-left" role="search">
                        <button data-bind="click: user().addNote.bind(user(),0)" type="submit" class="btn btn-default"><i class="fa fa-plus-square"></i> Nowa notatka</button>
                        <button data-bind="click: user().addNote.bind(user(),1)" type="submit" class="btn btn-default"><i class="fa fa-bars"></i> Nowa ToDo Lista</button>
                        <div style="display: none" id="search" class="form-group">
                            <input type="text" class="form-control" placeholder="Szukaj">
                            <button type="submit" class="btn btn-default"><i class="fa fa-search"></i></button>
                        </div>
                    </form>
                </div>
            </div>
        </nav>

        <div id="notepad" data-bind="foreach: user().notes()">
            <div class="single-note">
                <div id="note-title">
                    <span id="note-title-span" data-bind="html: !title() ? '<i>Tytuł</i>' : title, click: isEditTitle.bind($data, true), style: { display: !isEditTitle() ? 'inline-block' : 'none' }"></span>
                    <input maxlength ="50" id="note-title-input" class="form-control" placeholder="Tytuł" data-bind="value: title, visible: isEditTitle, hasFocus: isEditTitle, event: { blur: updateNote.bind($data) }" />
                </div>
                <div id="note-content" data-bind="visible: type()===0">
                    <span id="note-content-span" data-bind="html: !text() ? '<i>Wprowadź tekst</i>' : textAsHtml, click: isEditText.bind($data, true), style: { display: !isEditText() ? 'inline-block' : 'none' }"></span>
                    <textarea id="note-content-textarea" data-bind="value: text, visible: isEditText, hasFocus: isEditText, event: { blur: updateNote.bind($data) }" class="form-control custom-control" rows="9"></textarea>
                </div>

                <div id="todolist-content" data-bind="visible: type()===1">
                    <form id="adding-task" class="form-inline" role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" data-bind="value: currentTask, valueUpdate:'afterkeydown'" placeholder="Napisz coś!">
                            <button class="btn btn-default" data-bind="disable: !currentTask(), click: addTask" type="submit"><i class="fa fa-plus"></i></button>
                        </div>
                    </form>
                    <br />
                    <div id="tasks" class="item" data-bind="foreach: tasks()">
                        <div id="single-task">
                            <input type="checkbox" value="" data-bind="checked: isDone, click: $parent.goOnListBottom.bind($parent)" />
                            <i style="visibility: hidden" class="fa fa-bars"></i>
                            <input id="tasks-input" data-bind="tooltip: {title: text(),placement: 'left'} ,value: shortText,click: isEditTask.bind($data, true), event: { blur: updateTask.bind($data) }, style: { textDecoration: isDone() ? 'line-through' : '' }" />
                            <button class="btn btn-default" type="submit" data-bind="click: $parent.deleteTask.bind($parent)"><i class="fa fa-trash-o fa-lg"></i></button>
                        </div>
                    </div>
                </div>
                <br />

                <div class="menu">
                    <button class="btn btn-default" type="submit" data-bind="click: $parent.user().deleteNote.bind($parent)"><i class="fa fa-times"></i></button>
                    <button style="visibility: hidden" class="btn btn-default"><i class="fa fa-th-list"></i></button>
                    <button style="visibility: hidden" class="btn btn-default" type="button" data-toggle="dropdown"><i class="fa fa-paint-brush"> <span class="caret"></span></i></button>

                    <span style="float: right;" data-bind="text: modificationDate;"></span>
                </div>

            </div>
        </div>

        <div style="clear: both;"></div>
    </div>

    <div id="login-window" data-bind="visible: !logged()">
        <table align="center">
            <tr height="100%">
                <td height="100%" width="100%" valign="middle" align="center">
                    <span align="center"><h3> Witaj w NoteeFY</h3></span>
                    <br />
                    <span style="display: inline;">
                        Podaj ID <input data-bind="value: userID, valueUpdate:'afterkeydown', event: {keypress: onEnter}" />
                        <button class="btn btn-info" type="submit" data-bind="click: logIn, enable: userID"><i class="fa fa-sign-in"></i>     ZALOGUJ</button>
                    </span>
                    <br /><br />
                    <p>
                        <u><span style="color: red" align="center" data-bind=" text: loginError">Nie ma takiego użytkownika</span></u>
                    </p>
                </td>
            </tr>
        </table>
    </div>

    <div id="loading" data-bind="visible: isLoading()">
        <div id="loading-window"></div>
        <div id="busy-indicator">
            <table align="center">
                <tr height="100%">
                    <td height="100%" width="100%" valign="middle" align="center">
                        <img src="images/busy_loader.gif" alt="Error" style="width: 150px; height: 150px;">
                    </td>
                </tr>
                <tr>
                    <td valign="middle" align="center">
                        <br />
                        <font color="#FFFFFF "><h4>Ładuje dane...</h4></font>
                    </td>
                </tr>
            </table>
        </div>
    </div>

    <script type="text/javascript" src="js/jquery/jquery-1.9.1.js"></script>
    <script type="text/javascript" src="js/jquery/jquery-ui.js"></script>
    <script type="text/javascript" src="js/knockout/knockout-3.3.0.debug.js"></script>
    <script type="text/javascript" src="js/knockout/knockout-sortable.min.js"></script>
    <script type="text/javascript" src="js/knockout/knockout-bootstrap.min.js"></script>
    <script type="text/javascript" src="js/models/user.js"></script>
    <script type="text/javascript" src="js/models/note.js"></script>
    <script type="text/javascript" src="js/models/task.js"></script>
    <script type="text/javascript" src="app.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

</body>
</html>